import{r as h,f as k,g as x,h as _,i as b,j as C,k as v,l as w,m as P,n as B,x as M,q as O,s as S,v as A,y as E,c as $,z,A as H,a as N,o as g}from"./entry.a6b52d29.js";const R=()=>null;function j(...o){const i=typeof o[o.length-1]=="string"?o.pop():void 0;typeof o[0]!="string"&&o.unshift(i);let[a,c,e={}]=o;if(typeof a!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");e.server=e.server??!0,e.default=e.default??R,e.lazy=e.lazy??!1,e.immediate=e.immediate??!0;const t=C(),d=()=>t.isHydrating?t.payload.data[a]:t.static.data[a],l=()=>d()!==void 0;t._asyncData[a]||(t._asyncData[a]={data:h(d()??e.default()),pending:h(!l()),error:k(t.payload._errors,a),status:h("idle")});const s={...t._asyncData[a]};s.refresh=s.execute=(r={})=>{if(t._asyncDataPromises[a]){if(r.dedupe===!1)return t._asyncDataPromises[a];t._asyncDataPromises[a].cancelled=!0}if((r._initial||t.isHydrating&&r._initial!==!1)&&l())return d();s.pending.value=!0,s.status.value="pending";const f=new Promise((n,u)=>{try{n(c(t))}catch(D){u(D)}}).then(n=>{if(f.cancelled)return t._asyncDataPromises[a];let u=n;e.transform&&(u=e.transform(n)),e.pick&&(u=q(u,e.pick)),s.data.value=u,s.error.value=null,s.status.value="success"}).catch(n=>{if(f.cancelled)return t._asyncDataPromises[a];s.error.value=n,s.data.value=v(e.default()),s.status.value="error"}).finally(()=>{f.cancelled||(s.pending.value=!1,t.payload.data[a]=s.data.value,s.error.value&&(t.payload._errors[a]=w(s.error.value)),delete t._asyncDataPromises[a])});return t._asyncDataPromises[a]=f,t._asyncDataPromises[a]};const y=()=>s.refresh({_initial:!0}),p=e.server!==!1&&t.payload.serverRendered;{const r=P();if(r&&!r._nuxtOnBeforeMountCbs){r._nuxtOnBeforeMountCbs=[];const n=r._nuxtOnBeforeMountCbs;r&&(x(()=>{n.forEach(u=>{u()}),n.splice(0,n.length)}),_(()=>n.splice(0,n.length)))}p&&t.isHydrating&&l()?(s.pending.value=!1,s.status.value=s.error.value?"error":"success"):r&&(t.payload.serverRendered&&t.isHydrating||e.lazy)&&e.immediate?r._nuxtOnBeforeMountCbs.push(y):e.immediate&&y(),e.watch&&b(e.watch,()=>s.refresh());const f=t.hook("app:data:refresh",n=>{if(!n||n.includes(a))return s.refresh()});r&&_(f)}const m=Promise.resolve(t._asyncDataPromises[a]).then(()=>s);return Object.assign(m,s),m}function q(o,i){const a={};for(const c of i)a[c]=o[c];return a}const I=async(o,i={},a={})=>{var s,y,p,m,r,f,n;const c=`${JSON.stringify(i)}${o}`,e=B(`${c}-state`,()=>({})),t=M();O(()=>{e.value&&e.value.id&&S(e.value.id,u=>e.value=u,a)});const{data:d,error:l}=await j(`${c}-asyncdata`,()=>t.get(`cdn/stories/${o}`,i));if((s=l.value)!=null&&s.response&&((y=l.value)==null?void 0:y.response.status)>=400&&((p=l.value)==null?void 0:p.response.status)<600)throw w({statusCode:(m=l.value)==null?void 0:m.response.status,statusMessage:((f=(r=l.value)==null?void 0:r.message)==null?void 0:f.message)||"Something went wrong when fetching from storyblok."});return e.value=(n=d.value)==null?void 0:n.data.story,e},K={class:"container mx-auto px-8 md:w-8/12 sm:w-full"},T=N("h1",{class:"text-center font-bold my-10"},"Clothes Reviews",-1),F={__name:"index",async setup(o){let i,a;const c=([i,a]=A(()=>I("home",{version:"draft"})),i=await i,a(),i);return(e,t)=>{const d=E("StoryblokComponent");return g(),$("div",K,[T,v(c)?(g(),z(d,{key:0,blok:v(c).content},null,8,["blok"])):H("",!0)])}}};export{F as default};
